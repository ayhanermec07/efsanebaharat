# Stok Azalan ÃœrÃ¼nler - Hesaplama Ã–rneÄŸi

## Birim BazlÄ± Stok Hesaplama

### Ã–rnek 1: 250 Gr'lÄ±k ÃœrÃ¼n

**ÃœrÃ¼n:** KÄ±rmÄ±zÄ± Biber  
**Birim Adedi:** 250 gr  
**Birim TÃ¼rÃ¼:** gr  
**Stok Birimi:** gr

| Stok MiktarÄ± | Hesaplama | Kalan Birim | Durum | GÃ¶sterilir mi? |
|--------------|-----------|-------------|-------|----------------|
| 1000 gr | 1000 / 250 = 4 | 4 birim | Ä°yi | âŒ HayÄ±r (â‰¥3) |
| 750 gr | 750 / 250 = 3 | 3 birim | Ä°yi | âŒ HayÄ±r (â‰¥3) |
| 500 gr | 500 / 250 = 2 | 2 birim | Az | âœ… Evet |
| 250 gr | 250 / 250 = 1 | 1 birim | Ã‡ok Az | âœ… Evet |
| 100 gr | 100 / 250 = 0.4 | 0.4 birim | Kritik | âœ… Evet |
| 0 gr | 0 / 250 = 0 | 0 birim | TÃ¼kendi | âœ… Evet |

### Ã–rnek 2: 1 Kg'lÄ±k ÃœrÃ¼n (Stok kg cinsinden)

**ÃœrÃ¼n:** Karabiber  
**Birim Adedi:** 1 kg  
**Birim TÃ¼rÃ¼:** kg  
**Stok Birimi:** kg

| Stok MiktarÄ± | Hesaplama | Kalan Birim | Durum | GÃ¶sterilir mi? |
|--------------|-----------|-------------|-------|----------------|
| 5 kg | 5 / 1 = 5 | 5 birim | Ä°yi | âŒ HayÄ±r (â‰¥3) |
| 3 kg | 3 / 1 = 3 | 3 birim | Ä°yi | âŒ HayÄ±r (â‰¥3) |
| 2.5 kg | 2.5 / 1 = 2.5 | 2.5 birim | Az | âœ… Evet |
| 1.5 kg | 1.5 / 1 = 1.5 | 1.5 birim | Ã‡ok Az | âœ… Evet |
| 0.8 kg | 0.8 / 1 = 0.8 | 0.8 birim | Kritik | âœ… Evet |
| 0 kg | 0 / 1 = 0 | 0 birim | TÃ¼kendi | âœ… Evet |

### Ã–rnek 3: 100 Gr'lÄ±k ÃœrÃ¼n (Stok kg cinsinden)

**ÃœrÃ¼n:** Kimyon  
**Birim Adedi:** 100 gr  
**Birim TÃ¼rÃ¼:** gr  
**Stok Birimi:** kg

| Stok MiktarÄ± | DÃ¶nÃ¼ÅŸtÃ¼rme | Hesaplama | Kalan Birim | Durum | GÃ¶sterilir mi? |
|--------------|------------|-----------|-------------|-------|----------------|
| 1 kg | 1000 gr | 1000 / 100 = 10 | 10 birim | Ä°yi | âŒ HayÄ±r (â‰¥3) |
| 0.5 kg | 500 gr | 500 / 100 = 5 | 5 birim | Ä°yi | âŒ HayÄ±r (â‰¥3) |
| 0.3 kg | 300 gr | 300 / 100 = 3 | 3 birim | Ä°yi | âŒ HayÄ±r (â‰¥3) |
| 0.25 kg | 250 gr | 250 / 100 = 2.5 | 2.5 birim | Az | âœ… Evet |
| 0.15 kg | 150 gr | 150 / 100 = 1.5 | 1.5 birim | Ã‡ok Az | âœ… Evet |
| 0.08 kg | 80 gr | 80 / 100 = 0.8 | 0.8 birim | Kritik | âœ… Evet |
| 0 kg | 0 gr | 0 / 100 = 0 | 0 birim | TÃ¼kendi | âœ… Evet |

### Ã–rnek 4: 5 Adet'lik ÃœrÃ¼n

**ÃœrÃ¼n:** Ã‡ay Paketi  
**Birim Adedi:** 5 adet  
**Birim TÃ¼rÃ¼:** adet  
**Stok Birimi:** adet

| Stok MiktarÄ± | Hesaplama | Kalan Birim | Durum | GÃ¶sterilir mi? |
|--------------|-----------|-------------|-------|----------------|
| 20 adet | 20 / 5 = 4 | 4 birim | Ä°yi | âŒ HayÄ±r (â‰¥3) |
| 15 adet | 15 / 5 = 3 | 3 birim | Ä°yi | âŒ HayÄ±r (â‰¥3) |
| 10 adet | 10 / 5 = 2 | 2 birim | Az | âœ… Evet |
| 5 adet | 5 / 5 = 1 | 1 birim | Ã‡ok Az | âœ… Evet |
| 3 adet | 3 / 5 = 0.6 | 0.6 birim | Kritik | âœ… Evet |
| 0 adet | 0 / 5 = 0 | 0 birim | TÃ¼kendi | âœ… Evet |

## Durum Renkleri

| Kalan Birim | Durum | Renk | AÃ§Ä±klama |
|-------------|-------|------|----------|
| 0 | TÃ¼kendi | ğŸ”´ KÄ±rmÄ±zÄ± | Stok tamamen bitti |
| 0 - 1 | Kritik | ğŸ”´ KÄ±rmÄ±zÄ± | 1 birimden az kaldÄ± |
| 1 - 2 | Ã‡ok Az | ğŸŸ  Turuncu | 1-2 birim arasÄ± |
| 2 - 3 | Az | ğŸŸ¡ SarÄ± | 2-3 birim arasÄ± |
| â‰¥ 3 | Ä°yi | - | Listede gÃ¶sterilmez |

## SÄ±ralama

ÃœrÃ¼nler **kÃ¼Ã§Ã¼kten bÃ¼yÃ¼ÄŸe** sÄ±ralanÄ±r:
1. En kritik Ã¼rÃ¼nler (0 birim) en Ã¼stte
2. Kritik Ã¼rÃ¼nler (0-1 birim)
3. Ã‡ok az Ã¼rÃ¼nler (1-2 birim)
4. Az Ã¼rÃ¼nler (2-3 birim)

## Kod MantÄ±ÄŸÄ±

```typescript
// Stok miktarÄ±nÄ± birim cinsine Ã§evir
let birimCinsindenStok = stokMiktari

// EÄŸer stok birimi ile birim tÃ¼rÃ¼ farklÄ±ysa dÃ¶nÃ¼ÅŸtÃ¼r
if (stokBirimi === 'kg' && birimTuru === 'gr') {
  birimCinsindenStok = stokMiktari * 1000 // kg'yi gr'a Ã§evir
} else if (stokBirimi === 'gr' && birimTuru === 'kg') {
  birimCinsindenStok = stokMiktari / 1000 // gr'yi kg'ye Ã§evir
}

// KaÃ§ birim kaldÄ±ÄŸÄ±nÄ± hesapla
const kalanBirimSayisi = birimCinsindenStok / birimAdedi

// 3 birimden az olanlarÄ± filtrele
.filter(stok => stok.kalan_birim_sayisi < 3)

// KÃ¼Ã§Ã¼kten bÃ¼yÃ¼ÄŸe sÄ±rala
.sort((a, b) => a.kalan_birim_sayisi - b.kalan_birim_sayisi)
```

## Test Senaryosu

1. **HazÄ±rlÄ±k:**
   - 250 gr'lÄ±k bir Ã¼rÃ¼n oluÅŸtur
   - Stok miktarÄ±nÄ± 500 gr yap (2 birim)

2. **Kontrol:**
   - "StoÄŸu Azalan ÃœrÃ¼nler" sayfasÄ±na git
   - ÃœrÃ¼n listede gÃ¶rÃ¼nmeli
   - "Kalan Birim" kolonu: "2.00 birim"
   - Durum: "Az" (SarÄ±)

3. **SatÄ±ÅŸ SimÃ¼lasyonu:**
   - 250 gr satÄ±ÅŸ yap
   - Yeni stok: 250 gr (1 birim)
   - Durum: "Ã‡ok Az" (Turuncu)

4. **Kritik Seviye:**
   - 150 gr daha satÄ±ÅŸ yap
   - Yeni stok: 100 gr (0.4 birim)
   - Durum: "Kritik" (KÄ±rmÄ±zÄ±)

5. **TÃ¼kendi:**
   - Kalan 100 gr'Ä± sat
   - Yeni stok: 0 gr (0 birim)
   - Durum: "TÃ¼kendi" (KÄ±rmÄ±zÄ±)

---

**OluÅŸturulma Tarihi:** 29 KasÄ±m 2024  
**Versiyon:** 1.2.0
